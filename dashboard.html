<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AIRDROP USDT KE – Dashboard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Firebase compat SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
/* ==== Firebase config (same) ==== */
const firebaseConfig = {
  apiKey: "AIzaSyD2Dqz6jg8YACBvg_G_7yIR6c8sSH39BsQ",
  authDomain: "cypx-onlinecrypto.firebaseapp.com",
  databaseURL: "https://cypx-onlinecrypto-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "cypx-onlinecrypto",
  storageBucket: "cypx-onlinecrypto.firebasestorage.app",
  messagingSenderId: "857500807275",
  appId: "1:857500807275:web:0e04242866ff30bec3812e",
  measurementId: "G-7PXLNKJLXV"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();
</script>

<style>
*{box-sizing:border-box;-webkit-user-select:none;-ms-user-select:none;user-select:none}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter, system-ui, Arial, sans-serif;
  background: linear-gradient(135deg,#050d25,#0a182c);
  color:#eef2f7;
  -webkit-font-smoothing:antialiased;
}
#loader{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
  background:linear-gradient(135deg,#050d25,#0a182c);z-index:99999;
}
.loader-box{display:flex;flex-direction:column;align-items:center;gap:12px;color:#dbeafe}
.spinner{width:64px;height:64px;border:6px solid rgba(255,255,255,0.08);border-top-color:#7c3aed;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loader-text{font-weight:700;color:#cfe8ff}
.page-content{padding-bottom:120px;max-width:980px;margin:0 auto}
header{background:rgba(255,255,255,0.03);display:flex;align-items:center;gap:12px;padding:12px 16px;position:sticky;top:0;z-index:30}
header img{height:36px}
header h2{margin:0;font-size:1.15rem;color:#a5b4fc;letter-spacing:1px}
.announcement{background:#00345a;color:#ffef6b;padding:8px;margin-top:8px;overflow:hidden;white-space:nowrap}
.announcement span{display:inline-block;padding-left:100%;animation:scroll 18s linear infinite}
@keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}
.balance-section{margin-top:12px;text-align:center;background:rgba(255,255,255,0.02);padding:18px;border-radius:10px}
.balance-section .email{font-size:.9rem;color:#ffd580}
.balance-section .balance{font-size:1.4rem;margin:8px 0;color:#ffd965}
.balance-buttons{display:flex;gap:12px;justify-content:center;margin-top:8px;flex-wrap:wrap}
.balance-buttons button{
  background:linear-gradient(90deg,#06b6d4,#7c3aed);
  color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer;
  box-shadow:0 8px 20px rgba(12,18,45,0.6);
  transition:transform .18s ease,opacity .18s ease;
}
.extra-info{text-align:center;padding:18px;margin-top:14px;background:rgba(255,255,255,0.02);border-radius:10px}
.extra-info img{max-width:100%;border-radius:10px;margin-bottom:12px;display:block;margin-left:auto;margin-right:auto;box-shadow:0 10px 30px rgba(5,10,20,0.6)}
.extra-info p{color:#dbeafe;line-height:1.45}
.claim-btn{background:linear-gradient(90deg,#f59e0b,#fde68a);border:none;padding:8px 16px;border-radius:10px;font-weight:800;cursor:pointer;color:#071123;box-shadow:0 8px 20px rgba(245,158,11,0.12)}
.claim-btn[disabled]{opacity:.6;cursor:not-allowed}
.task-countdown{margin:14px 0;padding:10px;text-align:center;background:rgba(6,9,21,0.45);border-radius:10px;color:#ffd965;font-weight:700}
.earnings-card{background:rgba(255,255,255,0.02);padding:14px;border-radius:10px;margin-bottom:12px}
.earnings-card h3{color:#fcd34d;margin:0 0 8px 0}
.earnings-list{max-height:180px;overflow:auto;padding-right:6px}
.earnings-list .row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px dashed rgba(255,255,255,0.03);color:#dbeafe}
.vip-list{margin-top:8px;padding:6px}
.vip-box{display:flex;align-items:center;gap:14px;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;margin-bottom:10px;position:relative;
  border:1px solid rgba(255,215,102,0.06);
  box-shadow:0 8px 40px rgba(255,204,0,0.06), inset 0 0 18px rgba(255,215,102,0.02);
  outline: 2px solid rgba(255,204,0,0.06);
  box-shadow: 0 8px 30px rgba(255,204,0,0.06), 0 0 18px rgba(255,204,0,0.06);
}
.vip-box img{height:46px;flex-shrink:0;border-radius:8px}
.vip-box .info{flex:1}
.vip-box .info p{margin:3px 0;color:#e6f4ff}
.vip-box .info .amount{font-weight:800;color:#ffd965}
.vip-box .arrow{margin-left:12px;color:#ffd965;font-weight:900;cursor:pointer;font-size:20px;flex-shrink:0;display:flex;align-items:center;justify-content:center;padding:8px;border-radius:8px;background:linear-gradient(90deg,#061025,#0d1b2e);box-shadow:0 6px 18px rgba(124,58,237,0.02)}
.popup{
  position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.98);
  min-width:260px;padding:14px 18px;border-radius:12px;background:#061022;color:#fff;font-weight:800;z-index:99999;
  border:2px solid rgba(124,58,237,0.6);
  box-shadow:0 12px 40px rgba(124,58,237,0.12),0 0 30px rgba(6,182,212,0.06);
  opacity:0;pointer-events:none;transition:opacity .25s ease,transform .25s ease;
}
.popup.show{opacity:1;transform:translate(-50%,-50%) scale(1)}
.popup.red{border-color:rgba(220,38,38,0.85);box-shadow:0 12px 40px rgba(220,38,38,0.12)}
nav{position:fixed;bottom:0;left:0;right:0;display:flex;justify-content:space-around;background:#002244;padding:8px 0}
nav a{color:#fff;text-decoration:none;text-align:center;font-size:.8rem}
nav i{font-size:18px}
@media (max-width:520px){
  .vip-box{flex-direction:column;align-items:flex-start}
  .vip-box .arrow{align-self:flex-end;margin-top:8px}
}
</style>
</head>
<body>
<div id="loader">
  <div class="loader-box">
    <div class="spinner"></div>
    <div class="loader-text">Loading... please wait</div>
  </div>
</div>

<div class="page-content" id="pageContent" aria-hidden="true">
  <header>
    <img src="https://png.pngtree.com/png-clipart/20221216/original/pngtree-vip-icon-design-png-image_8749175.png" alt="logo">
    <h2>AIRDROP USDT KE</h2>
  </header>

  <div class="announcement"><span>🛒 Welcome to AIRDROP USDT KE 🛒 We welcome investors and agents across Kenya!</span></div>

  <div class="balance-section">
    <div class="email" id="user-email">Loading...</div>
    <div class="balance" id="user-balance">Balance: KSH 0</div>
    <div class="balance-buttons">
      <button id="btn-deposit">Deposit</button>
      <button id="btn-withdraw">Withdraw</button>
      <button id="btn-company">Company</button>
    </div>
  </div>

  <div class="extra-info">
    <img src="https://media.istockphoto.com/id/841526170/photo/three-business-people-in-the-office-working-together.jpg?s=170667a&w=0&k=20&c=58v5HeRzpzV3qusfD33JuF0j4Am5rbBYhkc37ozCv84=" alt="Team">
    <p>
      Improve VIP work rules on the same day. Upgrading your VIP level allows you to complete more tasks without restrictions.
      You are currently at VIP1 and have completed today’s task. You can move to VIP2 to continue doing VIP2 tasks. The highest level is VIP10.
    </p>
    <button class="claim-btn" id="claim-btn">Claim KSH 26</button>
  </div>

  <div class="task-countdown">Task reset time: <span id="countdown"></span></div>

  <div class="earnings-card">
    <h3>VIP Earnings</h3>
    <div class="earnings-list" id="earnings-list"></div>
    <div class="earnings-total" id="vip-grand-total">Total VIP Earnings: KSH 0</div>
  </div>

  <div class="vip-list" id="vip-list"></div>
</div>

<nav>
  <a href="dashboard.html"><i class="fas fa-home"></i><br>Home</a>
  <a href="task.html"><i class="fas fa-tasks"></i><br>Tasks</a>
  <a href="team.html"><i class="fas fa-users"></i><br>Team</a>
  <a href="vip.html"><i class="fas fa-crown"></i><br>VIP</a>
  <a href="profile.html"><i class="fas fa-user"></i><br>Me</a>
</nav>

<script>
function fmt(n){return Number(n||0).toLocaleString('en-US');}
function showPopup(msg,err=false){const p=document.createElement('div');p.className='popup'+(err?' red':'');p.textContent=msg;document.body.appendChild(p);requestAnimationFrame(()=>p.classList.add('show'));setTimeout(()=>{p.classList.remove('show');setTimeout(()=>p.remove(),300)},3000);}
function hideLoader(){const l=document.getElementById('loader');const p=document.getElementById('pageContent');if(l){l.style.transition='opacity .45s';l.style.opacity='0';setTimeout(()=>l.remove(),500);}if(p)p.removeAttribute('aria-hidden');}
document.addEventListener('DOMContentLoaded',()=>{document.getElementById('btn-deposit').onclick=()=>location.href='depositbonus.html';document.getElementById('btn-withdraw').onclick=()=>location.href='withdraw.html';document.getElementById('btn-company').onclick=()=>location.href='company.html';});
auth.onAuthStateChanged(user=>{if(!user){location='signin.html';return;}const uid=user.uid;document.getElementById('user-email').textContent=user.email||'User';
const balRef=db.ref('users/'+uid+'/balance');balRef.on('value',s=>{const b=parseFloat(s.val()||0);document.getElementById('user-balance').textContent=`Balance: KSH ${fmt(b)}`;});
const vipAmounts=[5263,7895,10526,15789,21053,26316,31579,36842,42105,52632];const vipNames=["Starter","Basic","Silver","Gold","Platinum","Diamond","Elite","VIP Pro","Executive","Ultimate"];
function renderVip(unlocked=[]){const v=document.getElementById('vip-list');v.innerHTML='';vipAmounts.forEach((amt,i)=>{const lvl=i+1;const isU=unlocked.includes(lvl);const box=document.createElement('div');box.className='vip-box';box.innerHTML=`<img src="https://png.pngtree.com/png-clipart/20221216/original/pngtree-vip-icon-design-png-image_8749175.png"><div class="info"><p><strong>${vipNames[i]}</strong> – Unlock for: <span class="amount">KSH ${fmt(amt)}</span></p><p>${isU?"✅ Unlocked":"🔐 Locked"} VIP${lvl}</p><p>Earnings available within 24 hours</p></div><div class="arrow ${isU?'':'locked'}" data-lvl="${lvl}">»</div>`;v.appendChild(box);});
document.querySelectorAll('.vip-box .arrow').forEach(a=>{a.onclick=()=>{const lvl=parseInt(a.dataset.lvl);if(a.classList.contains('locked')){showPopup('Please unlock your VIP level first',true);return;}location.href=`vip.html?level=${lvl}`;};});}
renderVip([]);
const vipRef=db.ref('users/'+uid+'/unlockedVips');vipRef.on('value',s=>{const raw=s.val()||{};const u=[];Object.keys(raw).forEach(k=>{const n=parseInt(k,10);if(!isNaN(n)&&n!==0){const i=vipAmounts.indexOf(n);if(i!=-1)u.push(i+1);}else{const val=parseInt(raw[k],10);if(!isNaN(val)&&val>=1&&val<=10)u.push(val);}});renderVip([...new Set(u)]);hideLoader();});
const vipClaimsRef=db.ref('users/'+uid+'/vipClaims');const vipSimple={1:526,2:7895,3:10526,4:15789,5:21053,6:26316,7:31579,8:36842,9:42105,10:52632};
vipClaimsRef.on('value',s=>{const c=s.val()||{};const list=document.getElementById('earnings-list');list.innerHTML='';let total=0;for(let i=1;i<=10;i++){const days=(c[i]&&c[i].daysClaimed)?parseInt(c[i].daysClaimed):0;const earned=days*(vipSimple[i]||0);total+=earned;const row=document.createElement('div');row.className='row';row.innerHTML=`<div>VIP ${i}</div><div>KSH ${fmt(earned)}</div>`;list.appendChild(row);}document.getElementById('vip-grand-total').textContent=`Total VIP Earnings: KSH ${fmt(total)}`;});
const claimBtn=document.getElementById('claim-btn');const userRef=db.ref('users/'+uid);
userRef.child('hasClaimedBonus').once('value').then(s=>{if(s.val()){claimBtn.textContent='Completed';claimBtn.disabled=true;}});
claimBtn.onclick=()=>{if(claimBtn.disabled)return;userRef.transaction(u=>{u=u||{};if(u.hasClaimedBonus)return u;const c=parseFloat(u.balance||0);u.balance=c+26;u.hasClaimedBonus=true;return u;},(e,ok)=>{if(e)showPopup('Error claiming bonus',true);else if(ok){claimBtn.textContent='Completed';claimBtn.disabled=true;showPopup('KSH 26 Claimed');}else{claimBtn.textContent='Completed';claimBtn.disabled=true;}});};});
function startCountdown(){const el=document.getElementById('countdown');let start=localStorage.getItem('cStart')||Date.now();localStorage.setItem('cStart',start);setInterval(()=>{let diff=86400000-(Date.now()-start);if(diff<=0){start=Date.now();localStorage.setItem('cStart',start);diff=86400000;}const h=Math.floor(diff/3600000),m=Math.floor((diff%3600000)/60000),s=Math.floor((diff%60000)/1000);el.textContent=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;},1000);}
startCountdown();
window.addEventListener('load', hideLoader);
</script>
</body>
</html>
